{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Persons","props","searchResult","persons","filter","person","name","toLowerCase","includes","search","map","key","id","number","onClick","deleteHandler","length","console","log","Filter","value","onChange","PersonForm","onSubmit","formSubmit","nameValue","nameOnChange","numberValue","numberOnChange","type","baseURL","axios","get","then","response","data","newPerson","post","delete","status","put","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setSearch","notificationMessage","setNotificationMessage","notificationType","setNotificationType","useEffect","personServices","initialPersons","catch","error","displayNotifError","setTimeout","event","target","preventDefault","some","toUpperCase","existingPerson","find","window","confirm","returnedPerson","personsCopy","concat","deletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.25040742.chunk.js","sourcesContent":["import React from 'react';\n\nconst Persons = props => {\n  const searchResult = props.persons.filter(person =>\n    person.name.toLowerCase().includes(props.search.toLowerCase())\n  );\n\n  if (props.search === '') {\n    return (\n      <div>\n        {props.persons.map(person => (\n          <p key={person.id}>\n            {person.name} {person.number}\n            <span>\n              <button onClick={() => props.deleteHandler(person.id)}>\n                delete\n              </button>\n            </span>\n          </p>\n        ))}\n      </div>\n    );\n  } else if (searchResult.length < 1) {\n    return (\n      <div>\n        <p>No search results</p>\n      </div>\n    );\n  } else {\n    console.log('searchResult: ', searchResult);\n\n    return (\n      <div>\n        {searchResult.map(person => (\n          <p key={person.name}>\n            {person.name} {person.number}\n          </p>\n        ))}\n      </div>\n    );\n  }\n};\n\nexport default Persons;\n","import React from 'react';\n\nconst Filter = props => {\n  return (\n    <div>\n      <form>\n        <div>\n          filter shown with{' '}\n          <input value={props.value} onChange={props.onChange} />\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = props => {\n  return (\n    <div>\n      <form onSubmit={props.formSubmit}>\n        <div>\n          name: <input value={props.nameValue} onChange={props.nameOnChange} />\n        </div>\n        <div>\n          number:{' '}\n          <input value={props.numberValue} onChange={props.numberOnChange} />\n        </div>\n        <div>\n          <button type='submit'>add</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonForm;\n","import axios from \"axios\";\n\nconst baseURL = \"https://glacial-beach-43556.herokuapp.com/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseURL);\n  return request.then(response => response.data);\n};\n\nconst create = newPerson => {\n  const request = axios.post(baseURL, newPerson);\n  return request.then(response => response.data);\n};\n\nconst remove = id => {\n  const request = axios.delete(`${baseURL}/${id}`);\n  return request.then(response => response.status);\n};\n\nconst update = (id, newPerson) => {\n  const request = axios.put(`${baseURL}/${id}`, newPerson);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create, remove, update };\n","import React from 'react';\r\n\r\nconst Notification = ({ message, type }) => {\r\n  if (message === null) return null;\r\n\r\n  const style = {\r\n    color: type === 'error' ? 'red' : 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10,\r\n  };\r\n\r\n  return <div style={style}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport personServices from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [notificationMessage, setNotificationMessage] = useState(null);\n  const [notificationType, setNotificationType] = useState(null);\n\n  useEffect(() => {\n    personServices\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons))\n      .catch(error => console.log(\"Error: \", error));\n  }, []);\n\n  const displayNotifError = (error, message) => {\n    console.log(error);\n    setNotificationMessage(message);\n    setNotificationType(\"error\");\n    setTimeout(() => {\n      setNotificationType(null);\n      setNotificationMessage(null);\n    }, 5000);\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = event => {\n    setSearch(event.target.value);\n  };\n\n  const handleFormSubmit = event => {\n    event.preventDefault();\n\n    if (\n      persons.some(\n        person => person.name.toUpperCase() === newName.toUpperCase()\n      )\n    ) {\n      const existingPerson = persons.find(\n        person => person.name.toUpperCase() === newName.toUpperCase()\n      );\n\n      const person = {\n        name: existingPerson.name,\n        number: newNumber,\n        id: existingPerson.id,\n      };\n\n      const replaceConfirm = window.confirm(\n        `${person.name} is already added to the phonebook, replace the old number with a new one?`\n      );\n\n      if (replaceConfirm) {\n        personServices\n          .update(person.id, person)\n          .then(returnedPerson => {\n            const personsCopy = persons.filter(\n              person => person.id !== returnedPerson.id\n            );\n\n            setPersons(personsCopy.concat(returnedPerson));\n            setNotificationMessage(`Updated ${newName}'s number`);\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 5000);\n            console.log(\"Update succesful\");\n          })\n          .catch(error => displayNotifError(error, error.response.data.error));\n      }\n\n      setNewName(\"\");\n      setNewNumber(\"\");\n      return null;\n    }\n\n    const person = {\n      name: newName,\n      number: newNumber,\n    };\n\n    personServices\n      .create(person)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        console.log(\"succesfully inserted to db.json\");\n        setNotificationMessage(`Added ${newName}`);\n        setNotificationType(\"success\");\n        setTimeout(() => {\n          setNotificationType(null);\n          setNotificationMessage(null);\n        }, 5000);\n      })\n      .catch(error => displayNotifError(error, error.response.data.error));\n\n    console.log(\"Name Submitted: \", newName);\n  };\n\n  const handleDelete = id => {\n    const confirmDelete = window.confirm(\"Are you sure you want to delete?\");\n\n    if (!confirmDelete) return null;\n\n    const deletePerson = persons.find(person => person.id === id);\n\n    setPersons(persons.filter(person => person !== deletePerson));\n\n    personServices\n      .remove(id)\n      .then(status => {\n        if (status === 200 || status === 204) console.log(\"Person Removal Succesful\");\n        else console.log(\"Person Removal Status not OK\");\n      })\n      .catch(error => {\n        displayNotifError(\n          error,\n          `Information of ${deletePerson.name} has already been removed from the server`\n        );\n      });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} type={notificationType} />\n      <Filter value={search} onChange={handleSearchChange} />\n\n      <h3>add a new</h3>\n      <PersonForm\n        formSubmit={handleFormSubmit}\n        nameValue={newName}\n        nameOnChange={handleNameChange}\n        numberValue={newNumber}\n        numberOnChange={handleNumberChange}\n      />\n\n      <h3>Numbers</h3>\n      <Persons persons={persons} search={search} deleteHandler={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}