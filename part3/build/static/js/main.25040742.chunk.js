(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{14:function(e,n,t){e.exports=t(36)},36:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),o=t.n(u),c=t(2),l=function(e){var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.search.toLowerCase())}));return""===e.search?r.a.createElement("div",null,e.persons.map((function(n){return r.a.createElement("p",{key:n.id},n.name," ",n.number,r.a.createElement("span",null,r.a.createElement("button",{onClick:function(){return e.deleteHandler(n.id)}},"delete")))}))):n.length<1?r.a.createElement("div",null,r.a.createElement("p",null,"No search results")):(console.log("searchResult: ",n),r.a.createElement("div",null,n.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number)}))))},i=function(e){return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with"," ",r.a.createElement("input",{value:e.value,onChange:e.onChange}))))},m=function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.formSubmit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.nameValue,onChange:e.nameOnChange})),r.a.createElement("div",null,"number:"," ",r.a.createElement("input",{value:e.numberValue,onChange:e.numberOnChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},s=t(3),d=t.n(s),f="https://glacial-beach-43556.herokuapp.com/api/persons",h=function(){return d.a.get(f).then((function(e){return e.data}))},p=function(e){return d.a.post(f,e).then((function(e){return e.data}))},b=function(e){return d.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.status}))},v=function(e,n){return d.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){var n=e.message,t=e.type;if(null===n)return null;var a={color:"error"===t?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return r.a.createElement("div",{style:a},n)},g=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)(""),s=Object(c.a)(o,2),d=s[0],f=s[1],g=Object(a.useState)(""),O=Object(c.a)(g,2),C=O[0],j=O[1],w=Object(a.useState)(""),y=Object(c.a)(w,2),S=y[0],k=y[1],U=Object(a.useState)(null),R=Object(c.a)(U,2),V=R[0],N=R[1],P=Object(a.useState)(null),T=Object(c.a)(P,2),A=T[0],B=T[1];Object(a.useEffect)((function(){h().then((function(e){return u(e)})).catch((function(e){return console.log("Error: ",e)}))}),[]);var H=function(e,n){console.log(e),N(n),B("error"),setTimeout((function(){B(null),N(null)}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:V,type:A}),r.a.createElement(i,{value:S,onChange:function(e){k(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(m,{formSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name.toUpperCase()===d.toUpperCase()}))){var n=t.find((function(e){return e.name.toUpperCase()===d.toUpperCase()})),a={name:n.name,number:C,id:n.id};return window.confirm("".concat(a.name," is already added to the phonebook, replace the old number with a new one?"))&&v(a.id,a).then((function(e){var n=t.filter((function(n){return n.id!==e.id}));u(n.concat(e)),N("Updated ".concat(d,"'s number")),setTimeout((function(){N(null)}),5e3),console.log("Update succesful")})).catch((function(e){return H(e,e.response.data.error)})),f(""),j(""),null}p({name:d,number:C}).then((function(e){u(t.concat(e)),f(""),j(""),console.log("succesfully inserted to db.json"),N("Added ".concat(d)),B("success"),setTimeout((function(){B(null),N(null)}),5e3)})).catch((function(e){return H(e,e.response.data.error)})),console.log("Name Submitted: ",d)},nameValue:d,nameOnChange:function(e){f(e.target.value)},numberValue:C,numberOnChange:function(e){j(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(l,{persons:t,search:S,deleteHandler:function(e){if(!window.confirm("Are you sure you want to delete?"))return null;var n=t.find((function(n){return n.id===e}));u(t.filter((function(e){return e!==n}))),b(e).then((function(e){200===e||204===e?console.log("Person Removal Succesful"):console.log("Person Removal Status not OK")})).catch((function(e){H(e,"Information of ".concat(n.name," has already been removed from the server"))}))}}))};o.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.25040742.chunk.js.map